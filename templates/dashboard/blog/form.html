{% extends 'dashboard/base.html' %}

{% block content %}
<div class="max-w-4xl">
    <a href="{% url 'dashboard:blog_list' %}" class="inline-flex items-center gap-2 text-gray-400 hover:text-primary-400 mb-6">‚Üê Back to posts</a>

    <form method="post" enctype="multipart/form-data" class="space-y-6">
        {% csrf_token %}

        <div class="glass rounded-2xl p-6">
            <div class="grid gap-6">
                <div>
                    <label class="block text-sm text-gray-400 mb-2">Title *</label>
                    <input type="text" name="title" value="{{ post.title|default:'' }}" required class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white text-lg" placeholder="Post title">
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-2">Slug *</label>
                    <input type="text" name="slug" value="{{ post.slug|default:'' }}" required class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="post-url-slug">
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-2">Excerpt *</label>
                    <textarea name="excerpt" rows="2" required class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="Brief summary of the post">{{ post.excerpt|default:'' }}</textarea>
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-2">Content *</label>
                    <textarea name="content" rows="12" required class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="Write your post content here...">{{ post.content|default:'' }}</textarea>
                </div>

                <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Status</label>
                        <select name="status" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white">
                            {% for value, label in status_choices %}
                            <option value="{{ value }}" {% if post.status == value %}selected{% endif %}>{{ label }}</option>
                            {% endfor %}
                        </select>
                    </div>
                    <div>
                        <label class="block text-sm text-gray-400 mb-2">Author</label>
                        <input type="text" name="author" value="{{ post.author|default:'Kaffero Team' }}" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white">
                    </div>
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-2">Tags (comma separated)</label>
                    <input type="text" name="tags" value="{{ post.tags|default:'' }}" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="cafe, tips, technology">
                </div>

                <div>
                    <label class="block text-sm text-gray-400 mb-2">Featured Image</label>
                    {% if post.featured_image %}
                    <img src="{{ post.featured_image.url }}" class="w-48 h-32 rounded-xl object-cover mb-3">
                    {% endif %}
                    <input type="file" name="featured_image" accept="image/*" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white">
                </div>
            </div>
        </div>

        <div class="glass rounded-2xl p-6">
            <h3 class="font-semibold mb-4">SEO Settings</h3>
            <div class="grid gap-4">
                <div>
                    <label class="block text-sm text-gray-400 mb-2">Meta Title</label>
                    <input type="text" name="meta_title" value="{{ post.meta_title|default:'' }}" maxlength="70" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="SEO title (max 70 chars)">
                </div>
                <div>
                    <label class="block text-sm text-gray-400 mb-2">Meta Description</label>
                    <textarea name="meta_description" rows="2" maxlength="160" class="w-full bg-dark-900/50 border border-primary-500/20 rounded-xl px-4 py-3 text-white" placeholder="SEO description (max 160 chars)">{{ post.meta_description|default:'' }}</textarea>
                </div>
            </div>
        </div>

        <div class="flex justify-end">
            <button type="submit" class="px-8 py-3 bg-gradient-to-r from-primary-500 to-primary-600 text-white font-semibold rounded-xl shadow-lg shadow-primary-500/30">
                {% if post %}Update Post{% else %}Create Post{% endif %}
            </button>
        </div>
    </form>
</div>
{% endblock %}
